<div class="registro-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="logo">游녻</div>
    <h1 class="app-title">Crear Cuenta</h1>
    <p class="app-subtitle">칔nete a Gastos Compartidos</p>
  </div>

  <!-- Registro Card -->
  <mat-card class="registro-card">
    <mat-card-content>
      <!-- Form Section -->
      <form [formGroup]="formulario" (ngSubmit)="registro()">
        <!-- Email -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Email</mat-label>
          <input matInput type="email" formControlName="email" (blur)="actualizarValidacionesError('email')">
          <mat-icon matPrefix>email</mat-icon>
          <mat-error *ngFor="let error of validacionesError['email']">
            {{ error }}
          </mat-error>
        </mat-form-field>

        <!-- Nombre -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nombre</mat-label>
          <input matInput type="text" formControlName="nombre" (blur)="actualizarValidacionesError('nombre')">
          <mat-icon matPrefix>person</mat-icon>
          <mat-error *ngFor="let error of validacionesError['nombre']">
            {{ error }}
          </mat-error>
        </mat-form-field>

        <!-- Apellido -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Apellido (Opcional)</mat-label>
          <input matInput type="text" formControlName="apellido" (blur)="actualizarValidacionesError('apellido')">
          <mat-icon matPrefix>badge</mat-icon>
          <mat-error *ngFor="let error of validacionesError['apellido']">
            {{ error }}
          </mat-error>
        </mat-form-field>

        <!-- Contrase침a -->
        <div class="password-section">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Contrase침a</mat-label>
            <input matInput [type]="mostrarPassword ? 'text' : 'password'" formControlName="password"
              (blur)="actualizarValidacionesError('password')">
            <mat-icon matPrefix>lock</mat-icon>
            <button mat-icon-button matSuffix type="button" (click)="togglePassword()" class="toggle-password">
              <mat-icon>{{ mostrarPassword ? 'visibility' : 'visibility_off' }}</mat-icon>
            </button>
            <mat-error *ngFor="let error of validacionesError['password']">
              {{ error }}
            </mat-error>
          </mat-form-field>

          <!-- Requisitos de contrase침a -->
          <div class="password-requirements" *ngIf="formulario.get('password')?.value">
            <p class="requirements-title">Requisitos:</p>
            <div class="requirement-item"
              [ngClass]="{'completed': /[a-z]/.test(formulario.get('password')?.value || '')}">
              <mat-icon>{{ /[a-z]/.test(formulario.get('password')?.value || '') ? 'check_circle' :
                'radio_button_unchecked' }}</mat-icon>
              <span>Letra min칰scula</span>
            </div>
            <div class="requirement-item"
              [ngClass]="{'completed': /[A-Z]/.test(formulario.get('password')?.value || '')}">
              <mat-icon>{{ /[A-Z]/.test(formulario.get('password')?.value || '') ? 'check_circle' :
                'radio_button_unchecked' }}</mat-icon>
              <span>Letra may칰scula</span>
            </div>
            <div class="requirement-item" [ngClass]="{'completed': /\d/.test(formulario.get('password')?.value || '')}">
              <mat-icon>{{ /\d/.test(formulario.get('password')?.value || '') ? 'check_circle' :
                'radio_button_unchecked' }}</mat-icon>
              <span>N칰mero</span>
            </div>
            <div class="requirement-item"
              [ngClass]="{'completed': /[@$!%*?&]/.test(formulario.get('password')?.value || '')}">
              <mat-icon>{{ /[@$!%*?&]/.test(formulario.get('password')?.value || '') ? 'check_circle' :
                'radio_button_unchecked' }}</mat-icon>
              <span>Car치cter especial (@$!%*?&)</span>
            </div>
            <div class="requirement-item"
              [ngClass]="{'completed': (formulario.get('password')?.value || '').length >= 8}">
              <mat-icon>{{ (formulario.get('password')?.value || '').length >= 8 ? 'check_circle' :
                'radio_button_unchecked' }}</mat-icon>
              <span>M칤nimo 8 caracteres</span>
            </div>
          </div>
        </div>

        <!-- Confirmar Contrase침a -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Confirmar Contrase침a</mat-label>
          <input matInput type="password" formControlName="confirmPassword"
            (blur)="actualizarValidacionesError('confirmPassword')">
          <mat-icon matPrefix>lock_outline</mat-icon>
          <mat-error *ngIf="formulario.errors?.['passwordMismatch'] && formulario.get('confirmPassword')?.touched">
            Las contrase침as no coinciden
          </mat-error>
        </mat-form-field>

        <!-- Nombre Pareja (Opcional) -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nombre del Grupo (Opcional)</mat-label>
          <input matInput type="text" formControlName="nombrePareja"
            (blur)="actualizarValidacionesError('nombrePareja')">
          <mat-icon matPrefix>group</mat-icon>
          <mat-error *ngFor="let error of validacionesError['nombrePareja']">
            {{ error }}
          </mat-error>
        </mat-form-field>

        <!-- Button -->
        <button mat-raised-button color="primary" type="submit" class="full-width submit-button"
          [disabled]="formulario.invalid || cargando">
          <mat-progress-spinner *ngIf="cargando" diameter="20" mode="indeterminate"></mat-progress-spinner>
          <span *ngIf="!cargando">Crear Cuenta</span>
        </button>
      </form>

      <!-- Login Link -->
      <div class="login-link">
        <p>쯏a tienes cuenta? <a routerLink="/login">Inicia sesi칩n aqu칤</a></p>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Footer -->
  <div class="footer">
    <p class="footer-text">춸 2026 Gastos Compartidos. Todos los derechos reservados.</p>
  </div>
</div>